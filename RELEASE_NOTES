#
# RELEASE_NOTES for EPICS BASE
#
# Reminder: Update EPICS_SITE_VERSION in configure/CONFIG_SITE
#           before each release
#
R3.15.5-2.0.12	2019-06-14 Bruce Hill
	Added Keenan Lang update to iocsh to disable echoing of comments beginning with #-
	Additional kernel special cases added to EpicsHostArch
	Define MV to mv -f so we can rebuild w/ different host arch.
	Support for building archive and req files from ioc dirs

R3.15.5-2.0.11	2019-04-30 Bruce Hill
	dbLoadSuspendOnError support
	Add check for EPICS_HOST_ARCH in BUILD_ARCHS in RULES_ARCHS
	Stop building linux-arm-apalis in R3.15.5-2.branch to avoid complicating
		other builds. See R3.15.5-apalis-2.branch
	Add support for rhel6 and rhel7 cross-compile of linux-arm-apalis

R3.15.5-2.0.10	Bruce Hill	2019-01-07
	Add -V flag to ca client tools to show EPICS and CA versions.
	Added a getCopy::exception function to ca/client for more useful error msgs.

R3.15.5-2.0.9	Bruce Hill	2018-08-22
	Include epicsStdio.h in dbChannel.c so driver report output can be redirected from iocsh.
		Fixes issue w/ R3.15.5 where some of the casr() output was not being redirected.
	Fix another case where msi should not be run w/ a template filename as an argument.

R3.15.5-2.0.8	Bruce Hill	2018-04-16
	Modify generalTimeGetEventPriority() to allow eventNumber > 256.
		eventNumbers between 0 and NUM_TIME_EVENTS will continue to get checked for advancing timestamps.
		Support for eventNumbers > NUM_TIME_EVENTS will be up to the generalTime provider.
	Revert "Bumped up NUM_TIME_EVENTS to 599 to allow more unused event numbers for TSE timing."
	Fix ECHO definition to not match variables in MAKEFLAGS by using MFLAGS instead.
	Cherry-picked M. Davidsaver bug fixes from 3.15
		db: dbGet() ensure long string nil and actual string length
		db: fix dbGet() for attributes as long string
		libCom: revise ipAddrToAscii

R3.15.5-2.0.7	Bruce Hill	2018-02-26
	Bumped up NUM_TIME_EVENTS to 599 to allow more unused event numbers for TSE timing.

R3.15.5-2.0.6	Bruce Hill	2018-1-24
	Updated LINUXRT_BUILDROOT_VERSION from buildroot-2015.02 to buildroot-2016.11.1

R3.15.5-2.0.5	Bruce Hill	2017-12-08
	Cleaned up custom rules for Restore, alh, archive, and autosave.
		CMD     += foo.cmd      # installs foo.cmd      to $INSTALL_LOCATION/db
		PROTO   += foo.proto    # installs foo.proto    to $INSTALL_LOCATION/db
		RESTORE += foo.cwConfig # installs foo.cwConfig to $INSTALL_LOCATION/restore
		ALH     += fool.alh     # installs foo.alh      to $INSTALL_LOCATION/alh
	Also made sure *.cmd and *.proto files can be installed via CMD += and PROTO +=. Default INSTALL dir for both is INSTALL_LOCATION/db, but 
	Install locations can be overridden by redefining INSTALL_CMD, INSTALL_PROTO, INSTALL_RESTORE, and INSTALL_ALH
	Sort DIRECTORY_TARGETS to avoid errors if 2 FILE_TYPEs have the same INSTALL directory.
	Rework module dependency conflict error message for easier debugging.
		Now a simply grep for asyn in the build log will show you line by line which modules depend on which asyn versions.

R3.15.5-2.0.4	Bruce Hill	2017-11-21
	Got most pcds makeBaseApp templates building again.
		pcdsBeckhoff and pcdsMotor need new module releases for R3.15.5-2.0
	Added new features to makeBaseApp.pl to support pcds templates.

R3.15.5-2.0.3	Bruce Hill	2017-11-10
	Added -P option to caget and camonitor to show SLAC fiducial pulse ID.

R3.15.5-2.0.2	Bruce Hill	2017-08-28
	Hugo Slepicka
		community patch patches/osiSockOptMcastLoop.patch
		Applying patches/fix-1699445.patch
		Applying patches/dbCa-warning.patch
		Fixed RTEMS targets to USE_GESYS=YES

R3.15.5-2.0.1	Bruce Hill	2017-06-05
	Fix seg fault when empty string is passed to caget or cainfo as the pvname parameter
	Applied macLib-macExpandString.patch to R3.15.5-1.branch to fix bug with macLib macExpandString.
	DBR_CTRL_CHAR_1elem_crash.patch, fixes IOC crashes for DBR_CTRL_CHAR request with 1 array element
	Various build fixes to remove warnings and set appropriate build flags
	Applied dbConvert.patch to fix crash on 64bit systems on calls to get_precision()

R3.15.5-2.0.0	Bruce Hill	2017-02-01
	Built from merge of R3.14.12.5-2.branch into R3.15.5-0.branch
	Includes the following patches:
		pcds-config-site.patch
		OSDThread-diag.patch for more verbose mlockall status.
		timestamp-before-writing-output.patch to update timestamp before processing outlinks
		perl-makeBaseApp-features.patch for pcds template support
		pcds-makeBaseApp-templates.patch for pcds templates
		convertRelease-diag.patch for new convertRelease option and better diagnostics
		rules-ioc-archive-autosave-templated.patch to build db, req, and archive files in ioc dirs
		caget-dynamic-array.patch to make async mode the default for better performance
		active-scan-count-exceeded-error-msg.patch for better error msg on Active scan count exceeded
		assert-abort-not-suspend.patch so ioc's exit on error
		epics-thread-show-linux-pids.patch so we can see linux pid in epicsThreadShow()
		non-rt-thread-priority-zero.patch, fixes neg priority bug if thread is non-RT
		string-record-strncpy.patch to avoid dangerous strcpy calls
		db-tpro-show-values.patch
		ca-sizes-in-error-msgs.patch
		pv-name-in-ca-error-msgs.patch
		mkmf-db-dep-for-sub-arch.patch
		readRelease-diags.patch for more informative readRelease error msgs
		tsel-implementation-comments.patch
		dbCaHasWriteAccess.patch to add dbCaHasWriteAccess() and dbCaHasReadAccess()
		db-link-error-diag.patch
		dbConvert.patch to fix crash on 64bit os when calling getFloatString()
		linuxRT_CCACHE_DISABLE.patch - Set CCACHE_DISABLE=1 to avoid permission problems with buildroot tmp dir
		linuxRT_CCACHE_DISABLE_FIX.patch - Fix to prior patch
		DBR_CTRL_CHAR_1elem_crash.patch - Fix IOC crash for DBR_CTRL_CHAR request with 1 array element
    	macLib-macExpandString.patch - Fix bug with macLib macExpandString.
    	Fixed RTEMS targets to USE_GESYS=YES.

R3.14.12.5-2.1	Bruce Hill 2017-01-05
	Built from R3.14.12.5-2.branch which was derived from tag R3.14.12.5 on the github-3.14 branch.
	Primary changes from R3.14.12.4 to R3.14.12.5
		aoRecord raw converion overflow fix
		Back-ported dbLoadRecordsHook from the 3.15 branch
		Fix buffer overflow in epicsStrnRawFromEscaped()
		epicsString.h comparison functions fixed
		gdd: Fix crash issue when copying array q/ zero elements
	For more details on collaboration fixes in R3.14.12.5, see documentation/RELEASE_NOTES.html

	Then the pcds-trunk branch (from svn) was decomposed into the patches shown below
	which were applied to R3.14.12.5 to create this release

	Includes the following patches:
		pcds-RTEMS-support.patch
			SLAC PCDS modifications for RTEMS build support
		pcds-RTEMS-support2.patch
			More SLAC PCDS modifications for RTEMS build support
		linuxRT-build-support.patch
			SLAC PCDS modifications for linuxRT build support
		rhel6-rhel7-build-support.patch
			SLAC PCDS modifications for rhel6 and rhel7 build support
		add-msi1.6-to-base-w-CONFIG_BASE.patch
			Adding msi 1.6 so we can build EPICS w/o needing msi in our PATH
		pcds-config-site.patch
			PCDS site configuration
		aSubTimeStamp.patch
			Makes aSub record's update their timestamp before processing their output links.
			Needed for proper timestamp propagation in areaDetector templates and plugins.
		timestamp-before-writing-output.patch
			Update timestamps in ao, aao, bo, calcout, longout, mbboDirect, mbbo, and stringout records before writing output values.
			Fixes timing errors when downstream records inherit timestamps via TSEL
		gdd-free-list-race.patch
			Fixes race condition in gdd when returning a DD object to the free list.
		OSDThread.patch
			Adds some code to the POSIX OSDThread once function to memlock all if the appropriate limits are set
		db_get_field_and_count.patch
			Fixes Launchpad bug 1581212, race condition in db_get_field_and_count().
		perl-makeBaseApp-features.patch
			PCDS enhancements to makeBaseApp:
				-d option for diagnostic output
				-r to specify _IOCPVROOT_ PV prefix
			Add support for _APPNAME_Screens to create custom screens directories
			Do global substitution for _APPNAME_, _APPTYPE_, ... so they can appear more than once per line
			Add support for install files in TOP
			Force iocBoot/ioc-name directories to begin w/ ioc-
			Allow _APPNAME_Lib directory for modules in contrast to _APPNAME_App for ioc apps
			Makes startup scripts executable Misc diagnostics
		pcds-makeBaseApp-templates.patch
			Install PCDS makeBaseApp templates
		readline_ncurses.patch
			Use READLINE_NCURSES for linux redhat targets.
		convertRelease-diag.patch
			Adds a debug option, -d, to convertRelease.pl
			Was quite usefull when debugging our templated ioc builds which build w/ a local TOP and a parent IOC_TOP.
		rules-ioc-archive-autosave-templated.patch
			Adds support for building archive and autosave request files
			New file suffixes and INSTALL locations:		*.tpl-arch:	
			Templates for archive request files:			*.sub-arch:
			Substitution files for archive request files:	*.archive:
			Archive request files TOP/archive
			Default install location
		caget-dynamic-array.patch
			Made asynchronous ca_array_get_callback the default for caget, thus supporting dynamic array sizing.
			Added -G option to force synchronous fetch w/o dynamic arrays.
		active-scan-count-exceeded-error-msg.patch
			Show more helpful msgs for active scan count exceeded.
		assert-abort-not-suspend.patch
			An unhandled exception will abort the process instead of suspending the thread.
			Thus, procServ restarts the ioc instead of leaving it crippled.
		epics-thread-show-linux-pids.patch
			Show linux PID instead of pthreads in epicsThreadShowAll
		non-rt-thread-priority-zero.patch
			Fix bug Mike found w/ default 0 priority when thread is non-RT and can't be set less than 1.
		string-record-strncpy.patch
			Protect against buffer overruns
		db-tpro-show-values.patch
			to show record VAL fields for tpro >= 2
		ca-sizes-in-error-msgs.patch
			to show data size vs max size in CA error msgs
		new-host-arch-names.patch
			to update startup/EpicsHostArch scripts
		pv-name-in-ca-error-msgs.patch
			Modified CA error msgs for invalid pv types to include the PV name.
		mkmf-db-dep-for-sub-arch.patch
			Extended the new db dependency fixes using mkmf.pl to also work for our *.sub-{db,tpl,arch} files.
		readRelease-diags.patch
			Improved user diagnostics for readRelease perl module
		convertRelease-typo.patch
			Fixed typo in rule for convertRelease envPaths
		pcds-gitignore.patch
			Adding a .gitignore file from pcds-trunk branch.
		tsel-implementation-comments.patch
			Improved comments re how TSEL links are implemented.
		only-one-ca-no-write-access-error-msg.patch2
			Added another ck to suppress error msg spewing
		only-one-ca-no-write-access-error-msg.patch
			Add tests for sevr already INVALID before issuing recGbl link errors to avoid spewing msgs endlessly to the console
		dbCaHasWriteAccess.patch
			Added new methods dbCaHasReadAccess() and dbCaHasWriteAccess() to 
			dbCa.c and dbCa.h following the pattern of the current dbCaIsConnected().
			Modified error messages in db/dbAccess.c to check for CA read and
			write access in order to set the record status to READ_ACCESS_ALARM
			or WRITE_ACCESS_ALARM as appropriate.
		dst2016.patch
			Fix 2016 DST dates
		startup-EpicsHostArch.patch
			Use startup/EpicsHostArch instead of startup/EpicsHostArch.pl to determine EPICS_HOST_ARCH.

Release Notes for R3.14.12.5-2.0: bhill Oct 20, 2016
		This release is deprecated as it only has some of the patches listed above.
